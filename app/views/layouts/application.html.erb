<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Admin Rodoban" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <%# Enable PWA manifest for installable apps (make sure to enable in config/routes.rb too!) %>
    <%#= tag.link rel: "manifest", href: pwa_manifest_path(format: :json) %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application.tailwind", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="dark:bg-boxdark-2 dark:text-bodydark">
      <!-- ===== Page Wrapper Start ===== -->
    <div class="flex h-screen overflow-hidden">
      <!-- ===== Sidebar Start ===== -->
     
        <!-- SIDEBAR MENU -->
       <%= render "shared/sidebar" %>
      <!-- ===== Sidebar End ===== -->

      <!-- ===== Content Area Start ===== -->
      <div class="relative flex flex-1 flex-col overflow-y-auto overflow-x-hidden">
        <!-- ===== Header Start ===== -->
        <header class="sticky top-0 z-999 flex w-full bg-white drop-shadow-1 dark:bg-boxdark dark:drop-shadow-none">
          <div class="flex flex-grow items-center justify-between py-4 px-4 shadow-2 md:px-6 2xl:px-11">
            <!-- Sidebar Toggle -->
            <button id="toggleSidebarMobile" class="rounded-sm border border-stroke bg-white p-1.5 shadow-sm dark:border-strokedark dark:bg-boxdark lg:hidden">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
              </svg>
            </button>
            
            <!-- Desktop Sidebar Toggle -->
            <button id="toggleSidebarDesktop" class="hidden lg:block">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 16h14"/>
              </svg>
            </button>

            <div class="flex items-center gap-2 sm:gap-4">
              <!-- Search -->
              <form action="" method="POST">
                <div class="relative">
                  <button class="absolute left-0 top-1/2 -translate-y-1/2">
                    <svg class="fill-body hover:fill-primary dark:fill-bodydark dark:hover:fill-primary" width="15" height="15" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.16666 3.33332C5.945 3.33332 3.33332 5.945 3.33332 9.16666C3.33332 12.3883 5.945 15 9.16666 15C12.3883 15 15 12.3883 15 9.16666C15 5.945 12.3883 3.33332 9.16666 3.33332ZM1.66666 9.16666C1.66666 5.02452 5.02452 1.66666 9.16666 1.66666C13.3088 1.66666 16.6667 5.02452 16.6667 9.16666C16.6667 13.3088 13.3088 16.6667 9.16666 16.6667C5.02452 16.6667 1.66666 13.3088 1.66666 9.16666Z" fill=""></path>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M13.2857 13.2857C13.6112 12.9603 14.1388 12.9603 14.4642 13.2857L18.0892 16.9107C18.4147 17.2362 18.4147 17.7638 18.0892 18.0892C17.7638 18.4147 17.2362 18.4147 16.9107 18.0892L13.2857 14.4642C12.9603 14.1388 12.9603 13.6112 13.2857 13.2857Z" fill=""></path>
                    </svg>
                  </button>

                  <input type="text" placeholder="Pesquisar..." class="w-full bg-transparent pl-9 pr-4 font-medium focus:outline-none xl:w-125">
                </div>
              </form>
            </div>

            <div class="flex items-center gap-3 2xsm:gap-7">
              <ul class="flex items-center gap-2 2xsm:gap-4">
                <!-- Dark Mode -->
                <li>
                  <button class="relative flex h-8.5 w-8.5 items-center justify-center rounded-full border-[0.5px] border-stroke bg-gray hover:text-primary dark:border-strokedark dark:bg-meta-4 dark:text-white">
                    <svg class="fill-current" width="14" height="14" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M7.11111 9C7.11111 10.0429 7.98889 10.8889 9.0625 10.8889C10.1361 10.8889 11.0139 10.0429 11.0139 9C11.0139 7.95714 10.1361 7.11111 9.0625 7.11111C7.98889 7.11111 7.11111 7.95714 7.11111 9ZM9.0625 5.77778C10.8903 5.77778 12.375 7.23453 12.375 9C12.375 10.7655 10.8903 12.2222 9.0625 12.2222C7.23472 12.2222 5.75 10.7655 5.75 9C5.75 7.23453 7.23472 5.77778 9.0625 5.77778ZM9.0625 4.44444C6.47639 4.44444 4.38889 6.48995 4.38889 9C4.38889 11.5101 6.47639 13.5556 9.0625 13.5556C11.6486 13.5556 13.7361 11.5101 13.7361 9C13.7361 6.48995 11.6486 4.44444 9.0625 4.44444Z" fill=""></path>
                    </svg>
                  </button>
                </li>

                <!-- Notification -->
                <li class="relative">
                  <button class="relative flex h-8.5 w-8.5 items-center justify-center rounded-full border-[0.5px] border-stroke bg-gray hover:text-primary dark:border-strokedark dark:bg-meta-4 dark:text-white">
                    <svg class="fill-current duration-300 ease-in-out" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M16.1999 14.9343L15.6374 14.0624C15.5249 13.8937 15.4687 13.7249 15.4687 13.528V7.67803C15.4687 6.01865 14.7655 4.47178 13.4718 3.31865C12.4312 2.39053 11.0812 1.7999 9.64678 1.6874V1.1249C9.64678 0.787402 9.36553 0.478027 8.9999 0.478027C8.6624 0.478027 8.35303 0.759277 8.35303 1.1249V1.65928C8.29678 1.65928 8.24053 1.65928 8.18428 1.6874C4.92178 2.05303 2.4749 4.66865 2.4749 7.79053V13.528C2.4749 13.7249 2.41865 13.8937 2.33428 14.0343L1.7999 14.9343C1.63115 15.2155 1.63115 15.553 1.7999 15.8343C1.96865 16.0874 2.2499 16.2562 2.55928 16.2562H8.38115C8.44053 17.0155 9.05615 17.6312 9.8155 17.6312C10.574 17.6312 11.1897 17.0155 11.2499 16.2562H15.4687C15.778 16.2562 16.0593 16.0874 16.228 15.8343C16.3968 15.553 16.3968 15.2155 16.1999 14.9343ZM9.64678 16.3124C9.3374 16.3124 9.08428 16.0592 9.08428 15.7499C9.08428 15.4405 9.3374 15.1874 9.64678 15.1874C9.95615 15.1874 10.2093 15.4405 10.2093 15.7499C10.2093 16.0592 9.95615 16.3124 9.64678 16.3124Z" fill=""></path>
                    </svg>
                  </button>
                </li>

                <!-- User -->
                <li class="relative">
                  <button class="flex items-center gap-4">
                    <span class="hidden text-right lg:block">
                      <span class="block text-sm font-medium text-black dark:text-white">Admin</span>
                      <span class="block text-xs">Administrador</span>
                    </span>

                    <img class="h-10 w-10 rounded-full" src="https://ui-avatars.com/api/?name=Admin" alt="User" />
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </header>
        <!-- ===== Header End ===== -->

        <!-- ===== Main Content Start ===== -->
        <main class="mx-auto max-w-screen-2xl p-4 md:p-6 2xl:p-10">
          <%= yield %>
        </main>
        <!-- ===== Main Content End ===== -->
      </div>
      <!-- ===== Content Area End ===== -->
    </div>
    <!-- ===== Page Wrapper End ===== -->

    <!-- Adicione este script antes do fechamento do body -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.getElementById('sidebar');
        const toggleSidebarDesktop = document.getElementById('toggleSidebarDesktop');
        const toggleSidebarMobile = document.getElementById('toggleSidebarMobile');
        const sidebarText = document.querySelectorAll('.sidebar-text');
        
        // Armazena o estado da sidebar em uma variável global
        window.sidebarState = {
          isCollapsed: false
        };
        
        function toggleSidebar(e) {
          e.preventDefault(); // Previne comportamento padrão do botão
          
          window.sidebarState.isCollapsed = !window.sidebarState.isCollapsed;
          
          if (window.sidebarState.isCollapsed) {
            sidebar.classList.remove('w-72.5');
            sidebar.classList.add('w-25');
            sidebarText.forEach(text => {
              text.classList.add('hidden');
            });
          } else {
            sidebar.classList.remove('w-25');
            sidebar.classList.add('w-72.5');
            sidebarText.forEach(text => {
              text.classList.remove('hidden');
            });
          }
        }
        
        // Adiciona o evento de clique usando addEventListener
        toggleSidebarDesktop.addEventListener('click', toggleSidebar);
        
        // Evento para mobile (mantém separado pois tem comportamento diferente)
        toggleSidebarMobile.addEventListener('click', function(e) {
          e.preventDefault();
          sidebar.classList.toggle('-translate-x-full');
        });
      });
    </script>
  </body>
</html>
